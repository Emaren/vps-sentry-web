# Copy to .vps.env and adjust values for your server.
VPS_HOST=hetzner-codex
VPS_APP_DIR=/path/to/your/repo/on/vps

# Use one restart/logging mode:
# 1) systemd service
VPS_SERVICE=vps-sentry-web.service

# 2) pm2 app (leave commented if using systemd)
# VPS_PM2_APP=vps-sentry-web

# Optional: force deploy branch/ref (example: v1.0, main, release/2026-02)
# If unset, script uses upstream branch or origin/<current>.
# VPS_GIT_REF=v1.0

# Deploy safety:
# - abort (default): fail if VPS repo has local-only commits
# - reset: create backup/<timestamp> on VPS then hard-reset to origin/<ref>
VPS_DEPLOY_STRATEGY=abort

# Require a clean local git tree before deploy (1=on, 0=off)
VPS_REQUIRE_CLEAN_LOCAL=1

# If VPS_GIT_REF is set, require local HEAD to be present on origin/<ref> (1=on, 0=off)
VPS_REQUIRE_PUSHED_REF=1

# Require passwordless sudo for systemd restart/log commands (1=on, 0=off)
# Keep enabled for zero-interactive deploys.
VPS_REQUIRE_NONINTERACTIVE_SUDO=1

# Optional: number of log lines for `make logs`
VPS_LOG_LINES=150

# SSH reliability knobs (seconds / attempts)
VPS_SSH_CONNECT_TIMEOUT=10
VPS_SSH_CONNECTION_ATTEMPTS=2
VPS_SSH_SERVER_ALIVE_INTERVAL=15
VPS_SSH_SERVER_ALIVE_COUNT_MAX=3
VPS_SSH_RETRIES=4
VPS_SSH_RETRY_DELAY_SECONDS=5

# Production monitor thresholds
VPS_WEB_PORT=3035
VPS_MONITOR_DISK_WARN_PCT=85
VPS_MONITOR_BACKUP_MAX_AGE_HOURS=26
VPS_MONITOR_CHECK_BACKUP=1

# Backup + restore drill
VPS_BACKUP_BASE=/home/tony/_backup/vps-sentry-web
VPS_BACKUP_KEEP_DAYS=14
VPS_SQLITE_DB_PATH=/var/www/vps-sentry-web/prisma/dev.db
# Optional: set when production is Postgres and pg_dump is available on VPS
# VPS_POSTGRES_DATABASE_URL=postgresql://user:pass@127.0.0.1:5432/vps_sentry_web?schema=public
# Optional: dedicated drill DB URL used by scripts/vps-restore-drill.sh
# VPS_RESTORE_DRILL_POSTGRES_URL=postgresql://user:pass@127.0.0.1:5432/vps_sentry_web_restore_drill?schema=public
VPS_RESTORE_DRILL_REQUIRE_POSTGRES=0
VPS_RESTORE_DRILL_REQUIRE_SQLITE=0

# Alert delivery (used by scripts/vps-alert.sh and vps-monitor --alert)
# Split multiple webhooks by comma, newline, or ||
# VPS_ALERT_WEBHOOK_URLS=https://hooks.example/a,https://hooks.example/b
# VPS_ALERT_EMAIL_TO=ops@example.com
# VPS_ALERT_EMAIL_FROM=vps-sentry@example.com
VPS_ALERT_SUBJECT_PREFIX='[VPS Sentry]'
VPS_ALERT_CURL_TIMEOUT_SECONDS=10

# Backup automation (cron on VPS)
VPS_BACKUP_CRON='17 * * * *'
VPS_BACKUP_LOG_PATH=/home/tony/vps-sentry-backup.log
